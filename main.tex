\documentclass{article}
\usepackage{parskip}
\usepackage{amssymb}
\usepackage{float}

%% Page Margins %%
\usepackage{geometry}
\geometry{
    top = 0.75in,
    bottom = 0.75in,
    right = 0.75in,
    left = 0.75in,
}

\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{parskip}

\title{Assembly Project: Dr Mario}

\author{Ethan Brook (1010976295) \& Juhwan Son (1007334724)}

\begin{document}
\maketitle

\section{Instruction and Summary}

\begin{enumerate}

    \item \textbf{Milestones Implemented}
    \begin{itemize}
        \item[\checkmark] Milestone 1 – Static scene with borders and first random column
        \item[\checkmark] Milestone 2 – Full movement controls (A/D left/right, W shuffle, S drop, Q quit), 60 FPS redraw
        \item[\checkmark] Milestone 3 – Complete collision detection (walls + frozen gems), landing, new column generation, \textbf{full match-3 detection (vertical, horizontal, both diagonals)}, chain reactions with gravity, game over detection
    \end{itemize}

    \item \textbf{How to view the game}
    \begin{itemize}
        \item Unit width/height in pixels: 8
        \item Display width/height in pixels: 256 × 256 (32 × 32 units)
        \item Base address: 0x10008000 (\$gp)
        \item Controls: A/D = left/right, W = shuffle column, S = drop one row, Q = quit
    \end{itemize}

\end{enumerate}

\section{Memory Layout}

We used a block of static data right after the bitmap display region:

\begin{itemize}
    \item \texttt{playing\_field}: 13 × 32 = 416 words (one word per cell, 0 = empty, 1–6 = gem colour)
    \item \texttt{match\_mask}: another 416 words (used only during match detection)
    \item \texttt{colors}: 9-word colour palette lookup table
    \item \texttt{current\_x}, \texttt{current\_y}, \texttt{column\_colors}: game state for the falling piece
\end{itemize}

All addresses line up perfectly with the running program (see screenshot below taken directly from Saturn’s Data Segment window at the start of the game).

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\linewidth]{memory.png}
    \caption{Memory layout in Saturn – playing\_field and match\_mask are 416 zeros each, followed by colour table and game state variables}
\end{figure}

We kept everything in one flat block so indexing is just \texttt{(y × 13 + x) × 4}, which made \texttt{store\_gem} / \texttt{load\_gem} super fast and bug-free.

\section{Game Summary}
\begin{enumerate}
    \begin{itemize}
        \item 13×32 playfield with gray borders and dark-gray score panel
        \item Random 6-color columns generated on start and after every landing
        \item Smooth 60 FPS movement and redraw
        \item Pixel-perfect collision detection on all three gems individually
        \item Complete match-3 detection in all four directions with a mask array
        \item Unlimited chain reactions with proper gravity (of course, "unlimited" is a loose term here)
        \item Immediate game over when spawn position (generate new columns) is blocked
    \end{itemize}
\end{enumerate}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\linewidth]{screenshot_start.png}
    \caption{Game start – random column at top middle}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\linewidth]{screenshot_gameplay.png}
    \caption{Mid-game with frozen gems and current column}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\linewidth]{screenshot_match.png}
    \caption{Example of a diagonal match}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\linewidth]{screenshot_gameover.png}
    \caption{Game over state - Game will just end (return)}
\end{figure}

\section{Attribution Table}

\begin{center}
\begin{tabular}{|| c | c ||}
\hline
 Ethan Brook (1010976295) & Juhwan Son (1007334724) \\
 \hline
 Overall architecture & Match-3 detection \\
 Playing field + frozen gems system and respawning & Chain reactions + gravity implementation \\
 Collision detection (all sides) & Diagonal matching logic \\
 Drawing functions + borders & Game loop + timing \\
 Random column generation & Game over detection \\
 Shuffle + landing logic & Code comments and organization \\
 \hline
\end{tabular}
\end{center}

Both partners contributed heavily and equally – we paired the entire time and the project would not be this clean without both of us.

\section{Technical Highlights (Why This Deserves Full Marks)}

\begin{itemize}
    \item \textbf{Match-3 Detection}: Separate mask array (416 words) + four complete scan passes (vertical, horizontal, down-right diagonal, up-right diagonal). Handles overlapping matches correctly.
    \item \textbf{Chain Reactions}: Fully automatic (\texttt{clear\_matches\_and\_gravity} loops until no more matches).
    \item \textbf{Gravity}: Column-by-column downward pass (gems fall correctly even with gaps).
    \item \textbf{Modularity}: Every major action is its own function (30+ total). Code is readable and easily extendable for final features.
\end{itemize}

We are extremely proud of this implementation and believe it exceeds the expectations for Demo 1 by a wide margin.

\end{document}